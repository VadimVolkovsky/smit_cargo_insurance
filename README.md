# smit_cargo_insurance

### Описание:

Приложение для расчета стоимости страхования груза

### Инструкция по запуску:

1. Клонируйте репозиторий:
```
git@github.com:VadimVolkovsky/smit_cargo_insurance.git
```

2. Переименуйте [`.env.example`](.env.example) в `.env`

3. Запустите приложение командой:
```
bash deploy.sh
```

Будет выполнено разворачивание контейнеров и наполнение БД тестовыми данными из файла `data_rates.json`



<details><summary><h3> Примеры запросов:</h3></summary>

Для ручного тестирования запросов удобно использовать интерактивное меню Swagger:
```
http://127.0.0.1/docs
```

**Расчет стоимости страхования:**

Во вкладке `POST /get_insurance/` нажмите кнопку "Try it out"

Отправьте запрос с тестовыми данными:
```
{
  "cargo_price": 1000,
  "cargo_type": "Glass",
  "cargo_date": "2020-06-01"
}
```

Нажмите кнопку "Execute"(выполнить)

В ответе будет отображен рассчет стоимости страхования:

```
{
  "insurance_price": 40
}
```

**Добавление новых ставок:**
Во вкладке `POST /create_rate/` нажмите кнопку "Try it out"

Отправьте запрос с тестовыми данными:
```
{
  "cargo_type": "Oil",
  "rate": 0.33,
  "cargo_date": "2020-06-01"
}
```

Нажмите кнопку "Execute"(выполнить)

В ответе будет отображен результат добавления новой ставки:

```
{
  "id": 7,
  "cargo_type": "Oil",
  "rate": 0.33,
  "date": "2023-07-17"
}
```


</details>
<details><summary><h3> Документация приложения:</h3></summary>
  
- Swagger
```
http://127.0.0.1/docs
```

- Redoc
```
http://127.0.0.1/redoc
```


## Логирование:
В приложении реализовано логирование.

Логи приложения сохраняются здесь:
```
app/logs/
```
</details>


**<details><summary><h3>Технологии </h3></summary>**
  
- Python 3.11
- FastAPI
- Tortoise
- aerich
</details>
